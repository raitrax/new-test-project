Citizen.CreateThread(function()

	-- Simeon: -47.16170 -1115.3327 26.5
		RequestIpl("shr_int")

	-- Trevor: 1985.48132, 3828.76757, 32.5
	-- Trash or Tidy. Only choose one.
		RequestIpl("TrevorsTrailerTrash")
		--RequestIpl("trevorstrailertidy")
	
	-- Heist Jewel: -637.20159 -239.16250 38.1
		RequestIpl("post_hiest_unload")

	-- Max Renda: -585.8247, -282.72, 35.45475
		RequestIpl("refit_unload")
  
	-- Heist Union Depository: 2.69689322, -667.0166, 16.1306286
		RequestIpl("FINBANK")

	-- Morgue: 239.75195, -1360.64965, 39.53437
		RequestIpl("Coroner_Int_on")
		RequestIpl("coronertrash")
	
	-- Cluckin Bell: -146.3837, 6161.5, 30.2062
		RequestIpl("CS1_02_cf_onmission1")
		RequestIpl("CS1_02_cf_onmission2")
		RequestIpl("CS1_02_cf_onmission3")
		RequestIpl("CS1_02_cf_onmission4")
	
	-- Grapeseed's farm: 2447.9, 4973.4, 47.7
		RequestIpl("farm")
		RequestIpl("farmint")
		RequestIpl("farm_lod")
		RequestIpl("farm_props")
		RequestIpl("des_farmhouse")
	
	-- FIB lobby: 105.4557, -745.4835, 44.7548
		RequestIpl("FIBlobby")
	
	-- Billboard: iFruit
		RequestIpl("FruitBB")
		RequestIpl("sc1_01_newbill")
		RequestIpl("hw1_02_newbill")
		RequestIpl("hw1_emissive_newbill")
		RequestIpl("sc1_14_newbill")
		RequestIpl("dt1_17_newbill")

	-- Lester's factory: 716.84, -962.05, 31.59
		RequestIpl("id2_14_during_door")
		RequestIpl("id2_14_during1")
	
	-- Life Invader lobby: -1047.9, -233.0, 39.0
		RequestIpl("facelobby")
	
	-- Tunnels
		RequestIpl("v_tunnel_hole")

	-- Carwash: 55.7, -1391.3, 30.5
		RequestIpl("Carwash_with_spinners")
	
	-- Stadium "Fame or Shame": -248.49159240722656, -2010.509033203125, 34.57429885864258
		RequestIpl("sp1_10_real_interior")
		RequestIpl("sp1_10_real_interior_lod")
	
	-- House in Banham Canyon: -3086.428, 339.2523, 6.3717
		RequestIpl("ch1_02_open")
		
	-- Garage in La Mesa (autoshop): 970.27453, -1826.56982, 31.11477
		RequestIpl("bkr_bi_id1_23_door")
		
	-- Hill Valley church - Grave: -282.46380000, 2835.84500000, 55.91446000
		RequestIpl("lr_cs6_08_grave_closed")
	
	-- Lost's trailer park: 49.49379000, 3744.47200000, 46.38629000
		RequestIpl("methtrailer_grp1")
		
	-- Lost safehouse: 984.1552, -95.3662, 74.50
		RequestIpl("bkr_bi_hw1_13_int")
			
	-- Raton Canyon river: -1652.83, 4445.28, 2.52
		RequestIpl("CanyonRvrShallow")
		
	-- Zancudo Gates (GTAO like): -1600.30100000, 2806.73100000, 18.79683000
--		RequestIpl("CS3_07_MPGates")
		
	-- Pillbox hospital:
		RequestIpl("rc12b_default")

	-- Josh's house: -1117.1632080078, 303.090698, 66.52217
		RequestIpl("bh1_47_joshhse_unburnt")
		RequestIpl("bh1_47_joshhse_unburnt_lod")
		
	-- Zancudo River (need streamed content): 86.815, 3191.649, 30.463
		RequestIpl("cs3_05_water_grp1")
		RequestIpl("cs3_05_water_grp1_lod")
		RequestIpl("cs3_05_water_grp2")
		RequestIpl("cs3_05_water_grp2_lod")
	
	-- Cassidy Creek (need streamed content): -425.677, 4433.404, 27.3253
		RequestIpl("canyonriver01")
		RequestIpl("canyonriver01_lod")
		
	-- Optional
		-- Graffitis
			RequestIpl("ch3_rd2_bishopschickengraffiti") -- 1861.28, 2402.11, 58.53
			RequestIpl("cs5_04_mazebillboardgraffiti") -- 2697.32, 3162.18, 58.1
			RequestIpl("cs5_roads_ronoilgraffiti") -- 2119.12, 3058.21, 53.25
			
		-- Heist Carrier: 3082.3117 -4717.1191 15.2622
			RequestIpl("hei_carrier")
			RequestIpl("hei_carrier_distantlights")
			RequestIpl("hei_Carrier_int1")
			RequestIpl("hei_Carrier_int2")
			RequestIpl("hei_Carrier_int3")
			RequestIpl("hei_Carrier_int4")
			RequestIpl("hei_Carrier_int5")
			RequestIpl("hei_Carrier_int6")
			RequestIpl("hei_carrier_lodlights")
			RequestIpl("hei_carrier_slod")
		
		-- Heist Yatch: -2043.974,-1031.582, 11.981
			RequestIpl("hei_yacht_heist")
			RequestIpl("hei_yacht_heist_Bar")
			RequestIpl("hei_yacht_heist_Bedrm")
			RequestIpl("hei_yacht_heist_Bridge")
			RequestIpl("hei_yacht_heist_DistantLights")
			RequestIpl("hei_yacht_heist_enginrm")
			RequestIpl("hei_yacht_heist_LODLights")
			RequestIpl("hei_yacht_heist_Lounge")
			
		-- Bunkers - Exteriors
			RequestIpl("gr_case0_bunkerclosed")
			RequestIpl("gr_case1_bunkerclosed")
			RequestIpl("gr_case2_bunkerclosed")
			RequestIpl("gr_case3_bunkerclosed")
			RequestIpl("gr_case4_bunkerclosed")
			RequestIpl("gr_case5_bunkerclosed")
			RequestIpl("gr_case6_bunkerclosed")
			RequestIpl("gr_case7_bunkerclosed")
			RequestIpl("gr_case9_bunkerclosed")
			RequestIpl("gr_case10_bunkerclosed")
			RequestIpl("gr_case11_bunkerclosed")
			
		-- Bunkers - Interior: 892.6384, -3245.8664, -98.2645
			-- RequestIpl("gr_entrance_placement")
			-- RequestIpl("gr_grdlc_interior_placement")
			-- RequestIpl("gr_grdlc_interior_placement_interior_0_grdlc_int_01_milo_")
			-- RequestIpl("gr_grdlc_interior_placement_interior_1_grdlc_int_02_milo_")
			
		-- Bahama Mamas: -1388.0013, -618.41967, 30.819599
			RequestIpl("hei_sm_16_interior_v_bahama_milo_")
		
		-- Red Carpet: 300.5927, 199.7589, 104.3776
			--RequestIpl("redCarpet") 

		-- UFO
		-- Zancudo: -2051.99463, 3237.05835, 1456.97021
		-- Hippie base: 2490.47729, 3774.84351, 2414.035
		-- Chiliad: 501.52880000, 5593.86500000, 796.23250000
			-- RequestIpl("ufo")
			-- RequestIpl("ufo_eye")
			-- RequestIpl("ufo_lod")
			
		-- North Yankton: 3217.697, -4834.826, 111.8152
			-- RequestIpl("prologue01")
			-- RequestIpl("prologue01c")
			-- RequestIpl("prologue01d")
			-- RequestIpl("prologue01e")
			-- RequestIpl("prologue01f")
			-- RequestIpl("prologue01g")
			-- RequestIpl("prologue01h")
			-- RequestIpl("prologue01i")
			-- RequestIpl("prologue01j")
			-- RequestIpl("prologue01k")
			-- RequestIpl("prologue01z")
			-- RequestIpl("prologue02")
			-- RequestIpl("prologue03")
			-- RequestIpl("prologue03b")
			-- RequestIpl("prologue04")
			-- RequestIpl("prologue04b")
			-- RequestIpl("prologue05")
			-- RequestIpl("prologue05b")
			-- RequestIpl("prologue06")
			-- RequestIpl("prologue06b")
			-- RequestIpl("prologue06_int")
			-- RequestIpl("prologuerd")
			-- RequestIpl("prologuerdb ")
			-- RequestIpl("prologue_DistantLights")
			-- RequestIpl("prologue_LODLights")
			-- RequestIpl("prologue_m2_door")
			
		-- CEO Offices :
			-- Arcadius Business Centre
				-- RequestIpl("ex_dt1_02_office_02b")	-- Executive Rich
				-- RequestIpl("ex_dt1_02_office_02c")	-- Executive Cool
				-- RequestIpl("ex_dt1_02_office_02a")	-- Executive Contrast
				-- RequestIpl("ex_dt1_02_office_01a")	-- Old Spice Warm
				-- RequestIpl("ex_dt1_02_office_01b")	-- Old Spice Classical
				-- RequestIpl("ex_dt1_02_office_01c")	-- Old Spice Vintage
				-- RequestIpl("ex_dt1_02_office_03a")	-- Power Broker Ice
				-- RequestIpl("ex_dt1_02_office_03b")	-- Power Broker Conservative
				-- RequestIpl("ex_dt1_02_office_03c")	-- Power Broker Polished
				
			-- Maze Bank Building
				-- RequestIpl("ex_dt1_11_office_02b")	-- Executive Rich
				-- RequestIpl("ex_dt1_11_office_02c")	-- Executive Cool
				-- RequestIpl("ex_dt1_11_office_02a")	-- Executive Contrast
				-- RequestIpl("ex_dt1_11_office_01a")	-- Old Spice Warm
				-- RequestIpl("ex_dt1_11_office_01b")	-- Old Spice Classical
				-- RequestIpl("ex_dt1_11_office_01c")	-- Old Spice Vintage
				-- RequestIpl("ex_dt1_11_office_03a")	-- Power Broker Ice
				-- RequestIpl("ex_dt1_11_office_03b")	-- Power Broker Conservative
				-- RequestIpl("ex_dt1_11_office_03c")	-- Power Broker Polished
				
			-- Lom Bank
				-- RequestIpl("ex_sm_13_office_02b")	-- Executive Rich
				-- RequestIpl("ex_sm_13_office_02c")	-- Executive Cool
				-- RequestIpl("ex_sm_13_office_02a")	-- Executive Contrast
				-- RequestIpl("ex_sm_13_office_01a")	-- Old Spice Warm
				-- RequestIpl("ex_sm_13_office_01b")	-- Old Spice Classical
				-- RequestIpl("ex_sm_13_office_01c")	-- Old Spice Vintage
				-- RequestIpl("ex_sm_13_office_03a")	-- Power Broker Ice
				-- RequestIpl("ex_sm_13_office_03b")	-- Power Broker Conservative
				-- RequestIpl("ex_sm_13_office_03c")	-- Power Broker Polished
				
			-- Maze Bank West
				-- RequestIpl("ex_sm_15_office_02b")	-- Executive Rich
				-- RequestIpl("ex_sm_15_office_02c")	-- Executive Cool
				-- RequestIpl("ex_sm_15_office_02a")	-- Executive Contrast
				-- RequestIpl("ex_sm_15_office_01a")	-- Old Spice Warm
				-- RequestIpl("ex_sm_15_office_01b")	-- Old Spice Classical
				-- RequestIpl("ex_sm_15_office_01c")	-- Old Spice Vintage
				-- RequestIpl("ex_sm_15_office_03a")	-- Power Broker Ice
				-- RequestIpl("ex_sm_15_office_03b")	-- Power Broker Convservative
				-- RequestIpl("ex_sm_15_office_03c")	-- Power Broker Polished

		-- Biker
			-- RequestIpl("bkr_biker_interior_placement_interior_0_biker_dlc_int_01_milo")
			-- RequestIpl("bkr_biker_interior_placement_interior_1_biker_dlc_int_02_milo")
			
			-- RequestIpl("bkr_biker_interior_placement_interior_2_biker_dlc_int_ware01_milo")
			-- RequestIpl("bkr_biker_interior_placement_interior_2_biker_dlc_int_ware02_milo")
			-- RequestIpl("bkr_biker_interior_placement_interior_2_biker_dlc_int_ware03_milo")
			-- RequestIpl("bkr_biker_interior_placement_interior_2_biker_dlc_int_ware04_milo")
			-- RequestIpl("bkr_biker_interior_placement_interior_2_biker_dlc_int_ware05_milo")
			
			-- RequestIpl("ex_exec_warehouse_placement_interior_0_int_warehouse_m_dlc_milo ")
			-- RequestIpl("ex_exec_warehouse_placement_interior_1_int_warehouse_s_dlc_milo ")
			-- RequestIpl("ex_exec_warehouse_placement_interior_2_int_warehouse_l_dlc_milo ")
		
		-- IMPORT/EXPORT
			-- RequestIpl("imp_dt1_02_modgarage")
			-- RequestIpl("imp_dt1_02_cargarage_a")
			-- RequestIpl("imp_dt1_02_cargarage_b")
			-- RequestIpl("imp_dt1_02_cargarage_c")
			 
			-- RequestIpl("imp_dt1_11_modgarage")
			-- RequestIpl("imp_dt1_11_cargarage_a")
			-- RequestIpl("imp_dt1_11_cargarage_b")
			-- RequestIpl("imp_dt1_11_cargarage_c")
			 
			-- RequestIpl("imp_sm_13_modgarage")
			-- RequestIpl("imp_sm_13_cargarage_a")
			-- RequestIpl("imp_sm_13_cargarage_b")
			-- RequestIpl("imp_sm_13_cargarage_c")
			 
			-- RequestIpl("imp_sm_15_modgarage")
			-- RequestIpl("imp_sm_15_cargarage_a")
			-- RequestIpl("imp_sm_15_cargarage_b")
			-- RequestIpl("imp_sm_15_cargarage_c")
			 
			-- RequestIpl("imp_impexp_interior_placement")
			-- RequestIpl("imp_impexp_interior_placement_interior_0_impexp_int_01_milo_")
			-- RequestIpl("imp_impexp_interior_placement_interior_3_impexp_int_02_milo_")
			-- RequestIpl("imp_impexp_interior_placement_interior_1_impexp_intwaremed_milo_")
			-- RequestIpl("imp_impexp_interior_placement_interior_2_imptexp_mod_int_01_milo_")


-- Avon Hertz Chiliad Bunker -- X, Y, Z, H
-- 1259.5418701172, 4812.1196289062, -39.77448272705, 344.82873535156

-- Doomsday Facility -- X, Y, Z, H
-- 483.2006225586, 4810.5405273438, -58.919288635254, 18.04705619812

-- IAA Facility -- X, Y, Z, H
-- 2151.1369628906, 2921.3303222656, -61.901874542236, 85.827827453614

-- IAA Server Bank -- X, Y, Z, H
-- 2158.1184082032, 2920.9382324218, -81.075386047364, 270.48007202148

-- Doomsday Submarine -- X, Y, Z, H
-- 514.29266357422, 4885.8706054688, -62.589862823486, 180.25909423828

-- Smugglers Run Hangar -- X, Y, Z, H
-- -1266.9995117188, -3014.6135253906, -49.517987060546, 359.93737792968
	
interiorID = GetInteriorAtCoords(483.2, 4810.5, -58.9)
	
	if IsValidInterior(interiorID) then
		EnableInteriorProp(interiorID, "set_int_02_decal_01")
		EnableInteriorProp(interiorID, "set_int_02_lounge1")
		EnableInteriorProp(interiorID, "set_int_02_cannon")
		EnableInteriorProp(interiorID, "set_int_02_clutter1")
		EnableInteriorProp(interiorID, "set_int_02_crewemblem")	
		EnableInteriorProp(interiorID, "set_int_02_shell")
		EnableInteriorProp(interiorID, "set_int_02_security")
		EnableInteriorProp(interiorID, "set_int_02_sleep")
		EnableInteriorProp(interiorID, "set_int_02_trophy1")
		EnableInteriorProp(interiorID, "set_int_02_paramedic_complete")
		EnableInteriorProp(interiorID, "set_Int_02_outfit_paramedic")
		EnableInteriorProp(interiorID, "set_Int_02_outfit_serverfarm")
		SetInteriorPropColor(interiorID, "set_int_02_decal_01", 1)
		SetInteriorPropColor(interiorID, "set_int_02_lounge1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_cannon", 1)
		SetInteriorPropColor(interiorID, "set_int_02_clutter1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_shell", 1)
		SetInteriorPropColor(interiorID, "set_int_02_security", 1)
		SetInteriorPropColor(interiorID, "set_int_02_sleep", 1)
		SetInteriorPropColor(interiorID, "set_int_02_trophy1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_paramedic_complete", 1)
		SetInteriorPropColor(interiorID, "set_Int_02_outfit_paramedic", 1)
		SetInteriorPropColor(interiorID, "set_Int_02_outfit_serverfarm", 1)
		RefreshInterior(interiorID)
	end	

	interiorID = GetInteriorAtCoords(-1266.0, -3014.0, -47.0)
	
	if IsValidInterior(interiorID) then
		EnableInteriorProp(interiorID, "set_lighting_hangar_a")
		EnableInteriorProp(interiorID, "set_tint_shell")
		EnableInteriorProp(interiorID, "set_bedroom_tint")
		EnableInteriorProp(interiorID, "set_crane_tint")
		EnableInteriorProp(interiorID, "set_modarea")
		EnableInteriorProp(interiorID, "set_lighting_tint_props")
		EnableInteriorProp(interiorID, "set_floor_1")
		EnableInteriorProp(interiorID, "set_floor_decal_1")
		EnableInteriorProp(interiorID, "set_bedroom_modern")
		EnableInteriorProp(interiorID, "set_office_modern")
		EnableInteriorProp(interiorID, "set_bedroom_blinds_open")
		EnableInteriorProp(interiorID, "set_lighting_wall_tint01")
		SetInteriorPropColor(interiorID, "set_tint_shell", 1)
		SetInteriorPropColor(interiorID, "set_bedroom_tint", 1)
		SetInteriorPropColor(interiorID, "set_crane_tint", 1)
		SetInteriorPropColor(interiorID, "set_modarea", 1)
		SetInteriorPropColor(interiorID, "set_lighting_tint_props", 1)
		SetInteriorPropColor(interiorID, "set_floor_decal_1", 1)
		RefreshInterior(interiorID)
	end

		RequestIpl("sm_smugdlc_interior_placement")
		RequestIpl("sm_smugdlc_interior_placement_interior_0_smugdlc_int_01_milo_")
		RequestIpl("xm_x17dlc_int_placement")
		RequestIpl("xm_x17dlc_int_placement_interior_0_x17dlc_int_base_ent_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_10_x17dlc_int_tun_straight_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_11_x17dlc_int_tun_slope_flat_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_12_x17dlc_int_tun_flat_slope_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_13_x17dlc_int_tun_30d_r_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_14_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_15_x17dlc_int_tun_straight_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_16_x17dlc_int_tun_straight_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_17_x17dlc_int_tun_slope_flat_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_18_x17dlc_int_tun_slope_flat_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_19_x17dlc_int_tun_flat_slope_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_1_x17dlc_int_base_loop_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_20_x17dlc_int_tun_flat_slope_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_21_x17dlc_int_tun_30d_r_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_22_x17dlc_int_tun_30d_r_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_23_x17dlc_int_tun_30d_r_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_24_x17dlc_int_tun_30d_r_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_25_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_26_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_27_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_28_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_29_x17dlc_int_tun_30d_l_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_2_x17dlc_int_bse_tun_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_30_v_apart_midspaz_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_31_v_studio_lo_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_32_v_garagem_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_33_x17dlc_int_02_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_34_x17dlc_int_lab_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_35_x17dlc_int_tun_entry_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_3_x17dlc_int_base_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_4_x17dlc_int_facility_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_5_x17dlc_int_facility2_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_6_x17dlc_int_silo_01_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_7_x17dlc_int_silo_02_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_8_x17dlc_int_sub_milo_")
		RequestIpl("xm_x17dlc_int_placement_interior_9_x17dlc_int_01_milo_")
		RequestIpl("xm_x17dlc_int_placement_strm_0")
		RequestIpl("xm_bunkerentrance_door")
		RequestIpl("xm_hatch_01_cutscene")
		RequestIpl("xm_hatch_02_cutscene")
		RequestIpl("xm_hatch_03_cutscene")
		RequestIpl("xm_hatch_04_cutscene")
		RequestIpl("xm_hatch_06_cutscene")
		RequestIpl("xm_hatch_07_cutscene")
		RequestIpl("xm_hatch_08_cutscene")
		RequestIpl("xm_hatch_09_cutscene")
		RequestIpl("xm_hatch_10_cutscene")
		RequestIpl("xm_hatch_closed")
		RequestIpl("xm_hatches_terrain")
		RequestIpl("xm_hatches_terrain_lod")
		RequestIpl("xm_mpchristmasadditions")
		RequestIpl("xm_siloentranceclosed_x17")

local xnmark = xnmark or {}
local distance = 50.5999

xnmark.locations = {
	["Doomsday Finale"] = {
		["markin"] = {-360.8825378418, 4826.5556640625, 143.14414978028},
		["markout"] = {1256.2868652344, 4798.3833007812, -39.471000671386},
		["locin"] = {1259.5418701172, 4812.1196289062, -39.77448272705, 344.82873535156},
		["locout"] = {-353.65161132812, 4815.8237304688, 142.7413635254},
	},
	["Doomsday Silo"] = {
		["markin"] = {598.3062133789, 5556.9243164062, -716.76141357422}, -- Not Used
		["markout"] = {369.55322265625, 6319.6455078125, -159.92749023438},
		["locin"] = {369.46231079102, 6319.7626953125, -659.92739868164}, -- Not Used
		["locout"] = {602.27032470704, 5546.9267578125, 716.38928222656, 246.04162597656},
	},
	["Doomsday Facility"] = {
		["markin"] = {1286.9239501954, 2845.8833007812, 49.394256591796},
		["markout"] = {489.0622253418, 4785.3623046875, -58.929149627686},
		["locin"] = {483.2006225586, 4810.5405273438, -58.919288635254, 18.04705619812},
		["locout"] = {1267.4091796875, 2830.9741210938, 48.444499969482, 128.1668395996},
	},
	["IAA Facility"] = {
		["markin"] = {2049.8181152344, 2949.5847167968, 47.735733032226},
		["markout"] = {2155.0627441406, 2921.0417480468, -61.902416229248},
		["locin"] = {2151.1369628906, 2921.3303222656, -61.901874542236, 85.827827453614},
		["locout"] = {2053.8020019532, 2953.4047851562, 47.664855957032, 354.8461303711},
	},
	["IAA Server"] = {
		["markin"] = {2477.6774902344, -402.14556884766, 94.817413330078},
		["markout"] = {2154.7639160156, 2921.0678710938, -81.075424194336},
		["locin"] = {2158.1184082032, 2920.9382324218, -81.075386047364, 270.48007202148},
		["locout"] = {2482.9174804688, -405.25631713868, 93.735389709472, 318.76651000976},
	},
	["Doomsday Sub"] = {
		["markin"] = {493.83395385742, -3222.7514648438, 10.49820137024},
		["markout"] = {514.42980957032, 4888.4028320312, -62.589431762696},
		["locin"] = {514.29266357422, 4885.8706054688, -62.589862823486, 180.25909423828},
		["locout"] = {496.30267333984, -3222.6359863282, 6.0695104599, 270.0},
	},
}

function TeleportIntoInterior(locationdata, ent)
	local x,y,z,h = table.unpack(locationdata)
	DoScreenFadeOut(1000)
	while IsScreenFadingOut() do Citizen.Wait(0) end
	NetworkFadeOutEntity(GetPlayerPed(-1), true, false)
	Wait(1000)
	SetEntityCoords(GetPlayerPed(-1), x, y, z)
	SetEntityHeading(GetPlayerPed(-1), h)
	NetworkFadeInEntity(GetPlayerPed(-1), 0)
	Wait(1000)
	FreezeEntityPosition(PlayerPedId(), false)
	SetGameplayCamRelativeHeading(0.0)
	DoScreenFadeIn(1000)
	while IsScreenFadingIn() do Citizen.Wait(0)	end
end

function TeleportIntoInteriorVehicle(locationdata, ent)
	local x,y,z,h = table.unpack(locationdata)
	DoScreenFadeOut(1000)
	while IsScreenFadingOut() do Citizen.Wait(0) end
	NetworkFadeOutEntity(GetPlayerPed(-1), true, false)
	Wait(1000)
	SetEntityCoords(GetVehiclePedIsIn(PlayerPedId(), false), x, y, z)
	SetEntityHeading(GetVehiclePedIsIn(PlayerPedId(), false), h)
	NetworkFadeInEntity(GetPlayerPed(-1), 0)
	Wait(1000)
	FreezeEntityPosition(GetVehiclePedIsIn(PlayerPedId(), false), false)
	SetGameplayCamRelativeHeading(0.0)
	DoScreenFadeIn(1000)
	while IsScreenFadingIn() do Citizen.Wait(0)	end
end

function SpawnFacility()
	interiorID = GetInteriorAtCoordsWithType(345.0041, 4842.001, -59.9997, "xm_x17dlc_int_02")
	
	if IsValidInterior(interiorID) then
		EnableInteriorProp(interiorID, "set_int_02_decal_01")
		EnableInteriorProp(interiorID, "set_int_02_lounge1")
		EnableInteriorProp(interiorID, "set_int_02_cannon")
		EnableInteriorProp(interiorID, "set_int_02_clutter1")
		EnableInteriorProp(interiorID, "set_int_02_crewemblem")	
		EnableInteriorProp(interiorID, "set_int_02_shell")
		EnableInteriorProp(interiorID, "set_int_02_security")
		EnableInteriorProp(interiorID, "set_int_02_sleep")
		EnableInteriorProp(interiorID, "set_int_02_trophy1")
		EnableInteriorProp(interiorID, "set_int_02_paramedic_complete")
		EnableInteriorProp(interiorID, "set_Int_02_outfit_paramedic")
		EnableInteriorProp(interiorID, "set_Int_02_outfit_serverfarm")
		SetInteriorPropColor(interiorID, "set_int_02_decal_01", 1)
		SetInteriorPropColor(interiorID, "set_int_02_lounge1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_cannon", 1)
		SetInteriorPropColor(interiorID, "set_int_02_clutter1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_shell", 1)
		SetInteriorPropColor(interiorID, "set_int_02_security", 1)
		SetInteriorPropColor(interiorID, "set_int_02_sleep", 1)
		SetInteriorPropColor(interiorID, "set_int_02_trophy1", 1)
		SetInteriorPropColor(interiorID, "set_int_02_paramedic_complete", 1)
		SetInteriorPropColor(interiorID, "set_Int_02_outfit_paramedic", 1)
		SetInteriorPropColor(interiorID, "set_Int_02_outfit_serverfarm", 1)
		RefreshInterior(interiorID)
	end	
end

function DespawnFacility()
	interiorID = GetInteriorAtCoordsWithType(345.0041, 4842.001, -59.9997, "xm_x17dlc_int_02")
	
	DisableInteriorProp(interiorID,  "set_int_02_decal_01")
	DisableInteriorProp(interiorID,  "set_int_02_lounge1")
	DisableInteriorProp(interiorID,  "set_int_02_cannon")
	DisableInteriorProp(interiorID,  "set_int_02_clutter1")
	DisableInteriorProp(interiorID,  "set_int_02_crewemblem")
	DisableInteriorProp(interiorID,  "set_int_02_shell")
	DisableInteriorProp(interiorID,  "set_int_02_security")
	DisableInteriorProp(interiorID,  "set_int_02_sleep")
	DisableInteriorProp(interiorID,  "set_int_02_trophy1")
	DisableInteriorProp(interiorID,  "set_int_02_paramedic_complete")
	DisableInteriorProp(interiorID,  "Set_Int_02_outfit_paramedic")
	DisableInteriorProp(interiorID,  "Set_Int_02_outfit_serverfarm")
end


Citizen.CreateThread(function()
	while true do
		Citizen.Wait(0)
		if not IsEntityDead(PlayerPedId(-1)) then
			for k,v in pairs(xnmark.locations) do
			
				local ix,iy,iz = table.unpack(v["markin"])
				local ox,oy,oz = table.unpack(v["markout"])
			
				if GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), ix, iy, iz, true) < 50.5999 then -- Outside Marker
					DrawMarker(2, ix,iy,iz, 0.0, 0.0, 0.0, 180.0, 0.0, 0.0, 0.75, 0.75, 0.75, 255, 255, 0, 100, false, true, 2, false, false, false, false)
					if GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), ix, iy, iz, true) < 1.0 then
						if k == "Doomsday Facility" then
							if IsPedInVehicle(PlayerPedId(), GetVehiclePedIsIn(PlayerPedId(), false), false) then
								FreezeEntityPosition(GetVehiclePedIsIn(PlayerPedId(), false), true)
								TeleportIntoInteriorVehicle(v["locin"], false)
								SpawnFacility()
							else
								FreezeEntityPosition(PlayerPedId(), true)
								SpawnFacility()
								TeleportIntoInterior(v["locin"], false)
							end
						elseif k == "Doomsday Finale" then
							if IsPedInVehicle(PlayerPedId(), GetVehiclePedIsIn(PlayerPedId(), false), false) then
								FreezeEntityPosition(GetVehiclePedIsIn(PlayerPedId(), false), true)
								TeleportIntoInteriorVehicle(v["locin"], false)
							else
								FreezeEntityPosition(PlayerPedId(), true)
								TeleportIntoInterior(v["locin"], false)
							end
						else		
							FreezeEntityPosition(PlayerPedId(), true)
							TeleportIntoInterior(v["locin"], false)
						end
					end
				end
				
				if GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), ox, oy, oz, true) < 50.5999 then -- Inside Marker
					DrawMarker(2, ox, oy, oz, 0.0, 0.0, 0.0, 180.0, 0.0, 0.0, 0.75, 0.75, 0.75, 255, 255, 0, 100, false, true, 2, false, false, false, false)
					if GetDistanceBetweenCoords(GetEntityCoords(GetPlayerPed(-1)), ox, oy, oz, true) < 1.0 then
						if k == "Doomsday Facility" then
							if IsPedInVehicle(PlayerPedId(), GetVehiclePedIsIn(PlayerPedId(), false), false) then
								FreezeEntityPosition(GetVehiclePedIsIn(PlayerPedId(), false), true)
								TeleportIntoInteriorVehicle(v["locout"], false)
								DespawnFacility()
							else
								FreezeEntityPosition(PlayerPedId(), true)
								TeleportIntoInterior(v["locout"], false)
								DespawnFacility()
							end
						elseif k == "Doomsday Finale" then
							if IsPedInVehicle(PlayerPedId(), GetVehiclePedIsIn(PlayerPedId(), false), false) then
								FreezeEntityPosition(GetVehiclePedIsIn(PlayerPedId(), false), true)
								TeleportIntoInteriorVehicle(v["locout"], false)
							else
								FreezeEntityPosition(PlayerPedId(), true)
								TeleportIntoInterior(v["locout"], false)
							end
						else
							FreezeEntityPosition(PlayerPedId(), true)
							TeleportIntoInterior(v["locout"], false)
						end
					end
				end
				
			end
		end
	end
end)

end)